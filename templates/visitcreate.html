{% extends "base.html" %}
{% load static %}

{% block content %}
{% load crispy_forms_tags %}



{% if img_error %}
<script>alert('{{img_error}}')</script>
{% endif %}

<div class="container">
    <div class="content">
        <div class="form-group ml-3 form-control-sm">
            <legend style="color: #212529;" class="border-bottom mb-4">ENTER DETAILS FOR VISITORS</legend>

            <form action="#" method="post">
                {% csrf_token %}
                {{ form|crispy }}

                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Click Photo</button>

                <div class="modal fade" id="myModal" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>

                            </div>
                            <div class="modal-body">

                                
                                <label class="form-switch">
                                    <input type="checkbox" id="webcam-switch">
                                    <i></i>
                                    <span id="webcam-caption">Click to Start Camera</span>
                                </label>
                                <button id="cameraFlip" class="btn d-none"></button>

                                <div id="errorMsg" class="col-12 col-md-6 alert-danger d-none">
                                    Fail to start camera, please allow permision to access camera. <br />
                                    If you are browsing through social media built in browsers, you would need to
                                    open the page in
                                    Sarafi
                                    (iPhone)/ Chrome (Android)
                                    <button id="closeError" class="btn btn-primary ml-3" type="button">OK</button>
                                </div>


                                <div id="webcam-container" class="webcam-container img-responsive">
                                    <video id="webcam" width="300%" height="300%"></video>
                                    <canvas id="canvas" class="" height="80" width="40"></canvas>


                                    <audio id="snapSound" src="{% static 'audio/snap.wav' %}" preload="auto"></audio>
                                </div>
                                <div id="cameraControls" class="cameraControls">
                                    <a href="#" id="exit-app" title="Exit App" class="d-none"><i
                                            class="material-icons">exit_to_app</i></a>
                                    <a href="#" id="take-photo" title="Take Photo"><i
                                            class="material-icons">camera_alt</i></a>
                                    <a href="#" id="download-photo" download="selfie.png" target="_blank"
                                        title="Save Photo" class="d-none"><i
                                            class="material-icons">file_download</i></a>
                                    <a href="#" id="resume-camera" title="Resume Camera" class="d-none"><i
                                            class="material-icons">camera_front</i></a>
                                </div>

                                <canvas id="canvas" class="d-none" height="100%" width="100%"></canvas>

                                <div id='image_list'></div>


                            </div>
                            <div class="modal-footer">

                            </div>
                        </div>

                    </div>
                </div>

                <button type="submit" class="btn btn-primary float-right" value="Submit">Submit</button>
            </form>
            
            <script src="{% static 'js/app.js' %}"></script>

        </div>

    </div>
</div>




<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"
    integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"
    integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG"
    crossorigin="anonymous"></script>




{% endblock content %}